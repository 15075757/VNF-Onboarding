# Licensed under the Apache License, Version 2.0 (the "License"); you may
# not use this file except in compliance with the License. You may obtain
# a copy of the License at
#
#         http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# For those usages not covered by the Apache License, Version 2.0 please
# contact:  osslegalrouting@vmware.com

##

###########################################################################
nsd:nsd-catalog:
    nsd:
    -   id: {{ multivdu_inputs.vnfd_name }}_nsd_id
        name: {{ multivdu_inputs.vnfd_name }}_nsd_name
        description: Generated by VNF-Onboarding Tool

        constituent-vnfd:
        -   member-vnf-index: 1
            vnfd-id-ref: {{ multivdu_inputs.vnfd_name }}-vnf

        vld:
           {% for vm in {{ multivdu_inputs }} %}
           {% for network in vm.network_names %}
    	   -   id: network-{{ loop.index }}
               {% if {{ loop.index }} == 1 %}
	       mgmt-network: 'true'
               vim-network-name: {{ network }} 	
	       vnfd-connection-point-ref:	
	       -   nsd:member-vnf-index-ref: 1
	           nsd:vnfd-id-ref: {{ multivdu_inputs.vnfd_name }}
	           nsd:vnfd-connection-point-ref: {{ multivdu_inputs.vnfd_name }}_cp_{{ loop.index }} 	
               {% else %}
               vnfd-connection-point-ref:
	       -   nsd:member-vnf-index-ref: 1
	           nsd:vnfd-id-ref: {{ multivdu_inputs.vnfd_name }}
		   nsd:vnfd-connection-point-ref: {{ multivdu_inputs.vnfd_name }}_cp_{{ loop.index }}
               {% endif %}
